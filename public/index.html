<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>
  <style>
  * {
    margin: 0;
    padding: 0;
  }
  </style>
  <script>
    var config = {
        type: Phaser.AUTO,
        width: window.innerWidth,
        height: window.innerHeight,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 200 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);

    function preload () {
        this.load.spritesheet(
            'marty_coast',
            'assets/sprites/MartyCoast.png',
            {frameWidth: 735, frameHeight: 1400}
        );

        this.load.spritesheet(
            'marty_ollie',
            'assets/sprites/MartyOllieCycleTrimmed.png',
            {frameWidth: 1000, frameHeight: 1800}
        );

        this.load.spritesheet(
            'marty_push',
            'assets/sprites/MartyPushCycleSizeddown.png',
            {frameWidth: 710, frameHeight: 820}
        )
    }

    function create () {
        cursors = this.input.keyboard.createCursorKeys();

        marty_push = this.physics.add.sprite(window.innerWidth/2, window.innerHeight, 'marty_push', [0]);
        marty_push.scaleX = 0.25;
        marty_push.scaleY = 0.25;
        marty_push.setBounce(0.2);
        marty_push.setCollideWorldBounds(true);

        this.anims.create({
            key: 'coast',
            frames: this.anims.generateFrameNumbers('marty_coast', {start: 0, end: 18}),
            frameRate: 30
        });

        this.anims.create({
            key: 'push',
            // frames: this.anims.generateFrameNumbers('marty_push', { start: 0, end: 21 }),
            frames: [
                // {key: 'marty_push', frame: 0},
                // {key: 'marty_push', frame: 1},
                // {key: 'marty_push', frame: 2},
                // {key: 'marty_push', frame: 3},
                // {key: 'marty_push', frame: 4},
                // {key: 'marty_push', frame: 5},
                {key: 'marty_push', frame: 6},
                {key: 'marty_push', frame: 7},
                {key: 'marty_push', frame: 8},
                // {key: 'marty_push', frame: 9},
                {key: 'marty_push', frame: 10},
                {key: 'marty_push', frame: 11},
                {key: 'marty_push', frame: 12},
                {key: 'marty_push', frame: 13},
                // {key: 'marty_push', frame: 14},
                // {key: 'marty_push', frame: 15},
                // {key: 'marty_push', frame: 16},
                // {key: 'marty_push', frame: 17},
                // {key: 'marty_push', frame: 18},
                {key: 'marty_push', frame: 19},
                // {key: 'marty_push', frame: 20},
                // {key: 'marty_push', frame: 21},
            ],
            frameRate: 10
        });

        this.anims.create({
            key: 'jump',
            // frames: this.anims.generateFrameNumbers('marty_ollie', {start: 0, end: 7}),
            frames: [
                // {key: 'marty_ollie', frame: 0},
                // {key: 'marty_ollie', frame: 2},
                {key: 'marty_ollie', frame: 4},
                // {key: 'marty_ollie', frame: 6},
                // {key: 'marty_ollie', frame: 18},
                // {key: 'mar ty_ollie', frame: 20},
                // {key: 'marty_ollie', frame: 22},
                // {key: 'marty_ollie', frame: 24},
            ],
            frameRate: 30
        })
    }

    function update () {
        if (cursors.right.isDown) {
            marty_push.setVelocity(160);
            marty_push.anims.play('push', true);
        } else if (cursors.left.isDown) {
            marty_push.setVelocity(-160, 0);
        } else if (cursors.space.isDown) {
            // marty.ollie = true; 
            // marty.anims.play('jump', true);
        } else {
            marty_push.setVelocity(0);
            // marty.anims.play('coast', true);
        }
    }
  </script>
</body>
</html>